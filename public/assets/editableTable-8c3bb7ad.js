import{Y as v,aN as K,r as S,j as s,d as p,aK as i,e as w,aM as b,a as k,t as q,i as m,B as E}from"./index-6bfe4b1d.js";import"./index-98b813fd.js";import{T as N}from"./index-d564e2b7.js";import{d as T}from"./service-5f331a07.js";const Y=({detailData:o,setDetailData:c,setSelectedRow:u,selectedRow:C})=>{const{data:d}=v(()=>K("CATEGORY")),x=[{title:"品名",dataIndex:"category",align:"center",render:(n,e,a)=>s(p,{disabled:e.status===1,placeholder:"请选择品名",allowClear:!0,value:e.category,onChange:(t,l)=>{const I=h.filter(g=>g!==e.nanoid),R=C.filter(g=>g.nanoid!==e.nanoid);y(I),u(R);const r=i.cloneDeep(o);t?(r[a].category=t,r[a].categoryName="children"in l?l.children:""):(r[a].category="",r[a].categoryName=""),c(r)},children:d==null?void 0:d.map(t=>s(p.Option,{value:t.key,children:t.title},t.id))})},{title:"款号",dataIndex:"styleCode",align:"center",render:(n,e,a)=>s(w,{disabled:e.status===1,value:e.styleCode,onChange:t=>{const l=i.cloneDeep(o);l[a].styleCode=t,c(l)}})},{title:"圈号",dataIndex:"circle",align:"center",render:(n,e,a)=>s(w,{disabled:e.status===1,value:e.circle,onChange:t=>{const l=i.cloneDeep(o);l[a].circle=t,c(l)}})},{title:"件重",dataIndex:"singleWeight",align:"center",render:(n,e,a)=>s(b,{disabled:e.status===1,value:e.singleWeight,onChange:t=>{const l=i.cloneDeep(o);l[a].singleWeight=t,c(l)}})},{title:"数量",dataIndex:"quantity",align:"center",render:(n,e,a)=>s(b,{disabled:e.status===1,value:e.quantity,onChange:t=>{const l=i.cloneDeep(o);l[a].quantity=t,c(l)}})},{title:"状态",align:"center",dataIndex:"status",render:n=>k(q,{children:[n===0&&s(m,{color:"red",children:"未排产"}),n===1&&s(m,{color:"green",children:"已排产"})]})},{title:"操作",align:"center",render:(n,e,a)=>s(E,{disabled:e.status===1,type:"text",onClick:()=>f(e.id,a),children:"删除"})}],f=async(n,e)=>{n&&await T(n),c(o.filter((a,t)=>t!==e))},[h,y]=S.useState([]);return s(N,{columns:x,data:o,pagination:!1,rowKey:"nanoid",rowSelection:{type:"checkbox",selectedRowKeys:h,onChange:(n,e)=>{y(n),u(e)},checkboxProps:n=>({disabled:!n.category||n.status===1})}})};export{Y as default};
