import{r as o,Y as y,Z as C,a as b,j as t,S as T,B as z,$ as x,T as w,a0 as j}from"./index-d9b286db.js";import{C as k}from"./index-1a9b1006.js";import"./index-3e8a6381.js";import{T as B}from"./index-b8adce3c.js";import P from"./form-4786d3d2.js";import{s as E}from"./index.module-c4e1ad75.js";import{getColumns as O}from"./constants-9e2173ce.js";import v from"./index-d6e63fdf.js";import{b as F,c as I}from"./service-0a2c8592.js";import"./index-ec76331c.js";import"./index-63f93476.js";import"./pictureUpload-8a2d544a.js";import"./index-e84d0038.js";import"./index.browser-7e542916.js";import"./index-be7cf5a1.js";import"./index-1b302d05.js";import"./service-858c771f.js";import"./editableTable-edc6afc3.js";import"./common-e743d0de.js";const{Title:N}=w;function ee(){var p;const[u,s]=o.useState(!1),[l,c]=o.useState({}),[e,i]=o.useState({pageSize:10,current:1}),{data:a,loading:d,run:n}=y(F),g=async(r,m)=>{switch(m){case"delete":await I(r.id),i({...e,current:1}),n(e);break;case"detail":c(r),s(!0);break}},f=o.useMemo(()=>O(g),[]);C(async()=>{await n(e)},[JSON.stringify(e)]);function h({current:r,pageSize:m}){i({...e,current:r,pageSize:m})}function S(r){i({...r,pageSize:e.pageSize,current:1,unixTime:j().unix()})}return b(k,{children:[t(N,{heading:6,children:"订单列表"}),t(P,{onSearch:S}),t("div",{className:E["button-group"],children:t(T,{children:t(z,{type:"primary",icon:t(x,{}),onClick:()=>s(!0),children:"新增"})})}),t(B,{rowKey:"id",loading:d,onChange:h,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize,total:(p=a==null?void 0:a.pagination)==null?void 0:p.total},columns:f,data:a==null?void 0:a.data}),u&&t(v,{data:l,onClose:()=>{s(!1),c({}),n(e)}})]})}export{ee as default};
