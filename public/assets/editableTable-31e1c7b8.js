import{Y as R,aN as v,r as K,j as o,d as w,aK as r,e as C,aM as b,a as k,t as q,i as x,B as E}from"./index-6b1c5c2b.js";import"./index-2d01e45a.js";import{T as N}from"./index-66a212c0.js";import{d as T}from"./service-69fa15cc.js";import j from"./pictureUpload-b1878e58.js";import"./index.browser-7e542916.js";const F=({detailData:s,setDetailData:c,setSelectedRow:h,selectedRow:f})=>{const{data:u}=R(()=>v("CATEGORY")),I=[{title:"品名",dataIndex:"category",align:"center",render:(t,e,a)=>o(w,{disabled:e.status===1,placeholder:"请选择品名",allowClear:!0,value:e.category,onChange:(n,l)=>{const d=y.filter(p=>p!==e.nanoid),g=f.filter(p=>p.nanoid!==e.nanoid);m(d),h(g);const i=r.cloneDeep(s);n?(i[a].category=n,i[a].categoryName="children"in l?l.children:""):(i[a].category="",i[a].categoryName=""),c(i)},children:u==null?void 0:u.map(n=>o(w.Option,{value:n.key,children:n.title},n.id))})},{title:"款号",dataIndex:"styleCode",align:"center",render:(t,e,a)=>o(C,{disabled:e.status===1,value:e.styleCode,onChange:n=>{const l=r.cloneDeep(s);l[a].styleCode=n,c(l)}})},{title:"图片",dataIndex:"imgSrc",align:"center",render:(t,e,a)=>o(j,{url:e.imgSrc,onChange:n=>{var d,g;const l=r.cloneDeep(s);l[a].imgSrc=(g=(d=n[0])==null?void 0:d.response)==null?void 0:g.src,c(l)}})},{title:"圈号",dataIndex:"circle",align:"center",render:(t,e,a)=>o(C,{disabled:e.status===1,value:e.circle,onChange:n=>{const l=r.cloneDeep(s);l[a].circle=n,c(l)}})},{title:"件重",dataIndex:"singleWeight",align:"center",render:(t,e,a)=>o(b,{disabled:e.status===1,value:e.singleWeight,onChange:n=>{const l=r.cloneDeep(s);l[a].singleWeight=n,c(l)}})},{title:"数量",dataIndex:"quantity",align:"center",render:(t,e,a)=>o(b,{disabled:e.status===1,value:e.quantity,onChange:n=>{const l=r.cloneDeep(s);l[a].quantity=n,c(l)}})},{title:"状态",align:"center",dataIndex:"status",render:t=>k(q,{children:[t===0&&o(x,{color:"red",children:"未排产"}),t===1&&o(x,{color:"green",children:"已排产"})]})},{title:"操作",align:"center",render:(t,e,a)=>o(E,{disabled:e.status===1,type:"text",onClick:()=>S(e.id,a),children:"删除"})}],S=async(t,e)=>{t&&await T(t),c(s.filter((a,n)=>n!==e))},[y,m]=K.useState([]);return o(N,{columns:I,data:s,pagination:!1,rowKey:"nanoid",rowSelection:{type:"checkbox",selectedRowKeys:y,onChange:(t,e)=>{m(t),h(e)},checkboxProps:t=>({disabled:!t.category||t.status===1})}})};export{F as default};
