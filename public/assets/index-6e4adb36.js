import{F as h,aU as S,j as e,a as r,e as p,X as _,r as d,Y as w,Z as F,t as C,S as b,B as u,$ as T,aV as B,aW as P,G as V,aX as k,R as z}from"./index-6bfe4b1d.js";import{M as j}from"./index-e8fe6b86.js";import{C as v}from"./index-6b1380ec.js";import{u as E,a as $,g as q,d as L,b as G,R as X,c as A}from"./edit-d5570a2c.js";import"./index-98b813fd.js";import{T as K}from"./index-d564e2b7.js";import{s as N}from"./index.module-c4e1ad75.js";import{getColumns as U}from"./constants-15caf928.js";const y=h.Item;function M({data:t,onClose:s}){const n=S(f),[a]=h.useForm();async function l(){await a.validate();const o=a.getFieldsValue();t.id?await E(t.id,o):await $({...o,dictId:n.id}),_.success("提交成功 !"),s()}return e("div",{children:e(j,{title:t.id?"编辑":"新增",visible:!0,onOk:l,autoFocus:!1,focusLock:!1,onCancel:s,children:r(h,{labelCol:{span:5},form:a,initialValues:t,children:[e(y,{label:"字段名",field:"title",rules:[{required:!0}],children:e(p,{placeholder:"请输入字段名"})}),e(y,{label:"编码",field:"key",rules:[{required:!0}],children:e(p,{placeholder:"请输入编码"})}),e(y,{label:"备注",field:"remark",children:e(p,{placeholder:"请输入备注"})})]})})})}const le=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));function O(){const t=S(f),[s,n]=d.useState(!1),[a,l]=d.useState({}),{data:o,loading:m,run:c}=w(q,{manual:!0});F(async()=>{await c(t==null?void 0:t.id)},[t==null?void 0:t.id]);const i=async(g,x)=>{x==="detail"&&(l(g),n(!0)),x==="delete"&&(await L(g.id),_.success("删除成功！"),await c(t==null?void 0:t.id))},D=d.useMemo(()=>U(i),[]);return r(v,{title:`字典详情-${t.key}`,style:{width:"100%"},children:[t!=null&&t.id?r(C,{children:[e("div",{className:N["button-group"],children:e(b,{children:e(u,{type:"primary",icon:e(T,{}),onClick:()=>{l({}),n(!0)},children:"新增"})})}),e(K,{rowKey:"id",loading:m,pagination:!1,columns:D,data:o||[]})]}):e(B,{description:"请先选择左侧的字典"}),s&&e(M,{data:a,onClose:async()=>{n(!1),await c(t==null?void 0:t.id)}})]})}const ne=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),{Row:W,Col:I}=V,f=P({key:"selectedDictState",default:{}}),Y=()=>e(C,{children:r(W,{gutter:20,children:[e(I,{span:6,children:e(R,{})}),e(I,{span:18,children:e(O,{})})]})}),oe=Object.freeze(Object.defineProperty({__proto__:null,default:Y,selectedDictState:f},Symbol.toStringTag,{value:"Module"})),Z=k.Item;function R(){const[t,s]=z(f),[n,a]=d.useState(!1),{data:l,refresh:o}=w(G);function m(i){j.confirm({title:"请确认是否要删除此数据！",onOk:async()=>{await A(i.id),await o(),_.success("删除成功！")}})}const c=async()=>{a(!1),await o()};return r(v,{title:"字典列表",style:{width:"100%"},extra:e(u,{type:"text",onClick:()=>{s({}),a(!0)},children:"新增"}),children:[e(k,{style:{height:"100%"},children:l==null?void 0:l.map(i=>r(Z,{onClick:()=>{s(i)},style:{display:"flex",justifyContent:"space-between"},children:[e(b,{children:i.title}),r(b,{children:[e(u,{type:"text",onClick:()=>{s(i),a(!0)},children:"编辑"}),e(u,{type:"text",status:"danger",onClick:()=>m(i),children:"删除"})]})]},i.id))}),n&&e(X,{data:t,onClose:c})]})}const re=Object.freeze(Object.defineProperty({__proto__:null,default:R},Symbol.toStringTag,{value:"Module"}));export{oe as a,re as b,le as e,ne as i};
