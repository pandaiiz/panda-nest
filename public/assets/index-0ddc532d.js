import{ar as T,b as x,ap as xe,as as en,at as nn,au as rn,av as Ne,aw as on,ax as tn,ay as an,r as f,j as u,az as ln,aA as sn,aB as cn,C as un,u as fn,aC as dn,a2 as vn,Q as mn,aD as pn,aE as Cn,o as gn,a as Y,a5 as hn,aF as bn,s as Oe,aq as yn,t as Ee,aG as kn,aH as we,L as xn,a4 as Te,aI as On,B as Pe}from"./index-f1de8f67.js";var k=globalThis&&globalThis.__assign||function(){return k=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},k.apply(this,arguments)};function En(e){var r=an(),o=r.prefixCls,a=r.simple;return x.createElement(Me,k({prefixCls:o,simple:a},e),e.content)}var H=function(e){var r=e.icon;if(!r&&r!==null&&(r=x.createElement(xe,null),e.isNotice))switch(e.noticeType){case"info":r=x.createElement(rn,null);break;case"success":r=x.createElement(nn,null);break;case"warning":r=x.createElement(xe,null);break;case"error":r=x.createElement(en,null);break}return e.isNotice&&(e.hideCancel=!0),e.title=r===null&&e.title===null?null:x.createElement("span",null,r,e.title),e};function Ie(e,r){var o,a=document.createElement("div");document.body.appendChild(a);var t=tn();function s(c){var d=x.createElement(Ne,k({},t),x.createElement(En,k({},c,{onCancel:m})));o?o.render(d):o=on(d,a)}var n=r||s,i=k(k({},e),{visible:!1}),O=function(){var c,d=e.onOk||e.onConfirm;d&&(c=d()),c&&c.then&&(i.confirmLoading=!0,n(i),c.then(function(){m(!0)},function(E){console.error(E),i.confirmLoading=!1,n(i)})),c||m(!0)};i.onOk=O,i=H(i),i.visible=!0,n(i);function v(){o=o==null?void 0:o._unmount(),a.parentNode&&a.parentNode.removeChild(a);for(var c=0;c<T.length;c++){var d=T[c];if(d===y){T.splice(c,1);break}}}function m(c){!c&&e.onCancel&&e.onCancel(),i.visible=!1,i.afterClose=function(){e.afterClose&&e.afterClose(),v()},n(i)}function g(c){i=k(k(k({},i),{title:e.title}),c),i=H(i),n(i)}function y(){i.visible=!1,i.afterClose=function(){e.afterClose&&e.afterClose(),v()},n(i)}return T.push(y),{close:y,update:g}}var w=globalThis&&globalThis.__assign||function(){return w=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},w.apply(this,arguments)},_e=globalThis&&globalThis.__read||function(e,r){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var a=o.call(e),t,s=[],n;try{for(;(r===void 0||r-- >0)&&!(t=a.next()).done;)s.push(t.value)}catch(i){n={error:i}}finally{try{t&&!t.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s};function wn(e,r){var o=_e(f.useState(!0),2),a=o[0],t=o[1],s=_e(f.useState(e),2),n=s[0],i=s[1];f.useImperativeHandle(r,function(){return{update:function(m){i(m)},close:function(){t(!1)}}});function O(){var m=n.onOk&&n.onOk();m&&m.then&&(i(function(g){return w(w({},g),{confirmLoading:!0})}),m.then(function(){t(!1)},function(g){console.error(g),i(function(y){return w(w({},y),{confirmLoading:!1})})})),m||t(!1)}function v(){n.onCancel&&n.onCancel(),t(!1)}return u(Me,{...w({unmountOnExit:!0,simple:!0},n,{visible:a,onOk:O,onCancel:v}),children:n.content})}const Tn=f.forwardRef(wn);var h=globalThis&&globalThis.__assign||function(){return h=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},h.apply(this,arguments)};function Pn(){var e=f.useRef(),r=u(ln,{ref:e}),o=0;function a(s){var n;o+=1;var i=f.createRef(),O=h({},s);function v(){s.afterClose&&s.afterClose(),g()}var m=u(Tn,{...h({key:o,ref:i},H(h({},s)),{afterClose:v})});(n=e.current)===null||n===void 0||n.addInstance(m);function g(){var d;(d=e.current)===null||d===void 0||d.removeInstance(m)}function y(){var d;(d=i.current)===null||d===void 0||d.close()}function c(d){var E;O=h(h({},O),d),(E=i.current)===null||E===void 0||E.update(H(h({},O)))}return T.push(y),{close:y,update:c}}var t={confirm:function(s){return a(h({},s))}};return["info","success","warning","error"].forEach(function(s){t[s]=function(n){return a(h(h({},n),{isNotice:!0,noticeType:s}))}}),[t,r]}var b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(e){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},b.apply(this,arguments)},_n=globalThis&&globalThis.__rest||function(e,r){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,a=Object.getOwnPropertySymbols(e);t<a.length;t++)r.indexOf(a[t])<0&&Object.prototype.propertyIsEnumerable.call(e,a[t])&&(o[a[t]]=e[a[t]]);return o},J=globalThis&&globalThis.__read||function(e,r){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var a=o.call(e),t,s=[],n;try{for(;(r===void 0||r-- >0)&&!(t=a.next()).done;)s.push(t.value)}catch(i){n={error:i}}finally{try{t&&!t.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return s},ee=null,Nn=0;sn||document.documentElement.addEventListener("click",function(e){ee={left:e.clientX,top:e.clientY},setTimeout(function(){ee=null},100)},!0);var In={mask:!0,maskClosable:!0,mountOnEnter:!0,escToExit:!0,getPopupContainer:function(){return document.body},alignCenter:!0};function Mn(e,r){var o,a,t,s=f.useContext(un),n=fn(e,In,(t=s.componentConfig)===null||t===void 0?void 0:t.Modal),i=n.className,O=n.style,v=n.visible,m=n.simple,g=n.title,y=n.children,c=n.cancelText,d=n.okText,E=n.okButtonProps,Re=n.cancelButtonProps,ne=n.getPopupContainer,$=ne===void 0?function(){return document.body}:ne,S=n.footer,re=n.afterClose,Fe=n.confirmLoading,V=n.mountOnEnter,z=n.unmountOnExit,oe=n.afterOpen,Se=n.hideCancel,te=n.autoFocus,ae=n.focusLock,Le=n.maskClosable,L=n.mask,je=n.alignCenter,le=n.getChildrenPopupContainer,Be=n.wrapClassName,A=n.escToExit,ie=n.modalRender,De=n.maskStyle,He=n.wrapStyle,se=n.closeIcon,$e=_n(n,["className","style","visible","simple","title","children","cancelText","okText","okButtonProps","cancelButtonProps","getPopupContainer","footer","afterClose","confirmLoading","mountOnEnter","unmountOnExit","afterOpen","hideCancel","autoFocus","focusLock","maskClosable","mask","alignCenter","getChildrenPopupContainer","wrapClassName","escToExit","modalRender","maskStyle","wrapStyle","closeIcon"]),I=f.useRef(null),ce=f.useRef(null),j=f.useRef(null),ue=J(f.useState(),2),fe=ue[0],de=ue[1],ve=J(f.useState(),2),me=ve[0],Ve=ve[1],B=f.useRef(null),pe=f.useRef(!1),M=f.useRef(!1),ze=dn(),D=f.useRef();D.current||(D.current=Nn++);var Ce=J(vn(!1,{defaultValue:!1,value:Fe}),2),Ae=Ce[0],W=Ce[1],p=s.getPrefixCls("modal",n.prefixCls),Z=s.locale,ge=s.rtl,We=!m,Ze="closable"in n?n.closable:We,Ke=f.useCallback(function(){return mn.findDOMNode($())},[$]);pn(Ke,{hidden:v&&L});var R=function(){n.onCancel&&n.onCancel()},he=function(l){A&&v&&l.key===On.key&&(l.stopPropagation(),R())},K=f.useRef(!1),qe=function(l){M.current&&(M.current=!1,!K.current&&Le&&L&&l.target===l.currentTarget&&setTimeout(function(){R()},100))},Ge=function(l){var C=n.onConfirm,_=n.onOk,F=_||C,N;F&&(N=F(l)),N&&N.then&&(W(!0),N.then(function(){W(!1)},function(X){W(!1),console.error(X)}))};f.useEffect(function(){var l=null;return A&&(l=setTimeout(function(){var C;Cn(document.body,I.current)&&((C=I.current)===null||C===void 0||C.focus())})),function(){l&&clearTimeout(l)}},[v,A]);var Qe=function(){var l;if(v&&me===void 0&&I.current){var C=+((l=window.getComputedStyle(I.current,null))===null||l===void 0?void 0:l.zIndex);isNaN(C)||Ve(C+1)}},Ue=function(){if(S!==null){var l=u(Pe,{...b({onClick:R},Re),children:c||Z.Modal.cancelText}),C=u(Pe,{...b({loading:Ae,onClick:Ge,type:"primary"},E),children:d||Z.Modal.okText}),_=Te(S)?S(l,C):S||Y(Ee,{children:[!Se&&l,C]});return u("div",{className:p+"-footer",children:_})}},q=s.focusLock.modal,Xe=!!q,Ye=gn(q)&&q.autoFocus,G=ae!==void 0?ae:Xe,Q=te!==void 0?te:Ye,be=Y(Ne,{...b({},s,{prefixCls:n.prefixCls||s.prefixCls,locale:Z,zIndex:me||1050,getPopupContainer:function(l){return typeof le=="function"?le(l):ce.current}}),children:[g&&u("div",{className:p+"-header",children:u("div",{className:p+"-title",id:"arco-dialog-"+D.current,children:g})}),u("div",{ref:ce,className:p+"-content",children:y}),Ue(),Ze&&(se!==void 0?u("span",{onClick:R,className:p+"-close-icon",children:se}):u(hn,{tabIndex:-1,onClick:R,className:p+"-close-icon",role:"button","aria-label":"Close",children:u(bn,{})}))]}),Je=g?{"aria-labelledby":"arco-dialog-"+D.current}:{},ye=u("div",{...b({role:"dialog","aria-modal":"true"},Je,{className:Oe(p,(o={},o[p+"-simple"]=m,o[p+"-rtl"]=ge,o),i),style:O,ref:j}),children:G?u(yn,{crossFrame:!1,disabled:!v,autoFocus:Q,lockProps:{tabIndex:-1,onKeyDown:he},children:be}):u(Ee,{children:be})}),U=function(l){if(!pe.current){var C="";if(B.current){var _=l.getBoundingClientRect(),F=B.current,N=F.left,X=F.top;C=N-_.left+"px "+(X-_.top)+"px"}l.style.transformOrigin=C}},ke=ze?!V:!!j.current;return v||ke?u(kn,{visible:v,forceRender:ke,getContainer:$,children:Y("div",{ref:r,children:[L?u(we,{in:v,timeout:400,appear:!0,mountOnEnter:V,classNames:"fadeModal",unmountOnExit:z,onEnter:function(l){l.style.display="block"},onExited:function(l){l.style.display="none"},children:u("div",{"aria-hidden":!0,className:p+"-mask",style:De})}):null,u("div",{...b({},xn($e,["content","icon","showIcon","isNotice","noticeType","onCancel","onOk","onConfirm","closable","prefixCls"]),{tabIndex:!G||!Q?-1:null,ref:function(l){I.current=l,Qe()},className:Oe(p+"-wrapper",(a={},a[p+"-wrapper-no-mask"]=!L,a[p+"-wrapper-align-center"]=je,a[p+"-wrapper-rtl"]=ge,a),Be),style:b(b({},He||{}),{display:v||fe?"block":"none",overflow:!v&&fe?"hidden":""}),onKeyDown:!G||!Q?he:null,onMouseDown:function(l){M.current=l.target===l.currentTarget},onClick:qe}),children:u(we,{in:v,timeout:400,appear:!0,classNames:"zoomModal",unmountOnExit:z,mountOnEnter:V,onEnter:function(l){de(!0),B.current=ee,pe.current=!!l.style.transformOrigin,U(l),j.current=l},onEntered:function(l){U(l),B.current=null,oe&&oe()},onExit:function(){K.current=!0},onExited:function(l){de(!1),U(l),re&&re(),K.current=!1,z&&(j.current=null)},children:x.cloneElement(Te(ie)?ie(ye):ye,{onMouseDown:function(){M.current=!1},onMouseUp:function(){M.current=!1}})})})]})}):null}var P=f.forwardRef(Mn);P.displayName="Modal";P.config=cn;P.confirm=function(e){return Ie(e)};P.useModal=Pn;["info","success","warning","error"].forEach(function(e){P[e]=function(r){return Ie(b(b({},r),{isNotice:!0,noticeType:e}))}});P.destroyAll=function(){for(;T.length;){var e=T.pop();e&&e()}};const Me=P;export{Me as M};
