import{r as C,C as re,p as be,j as m,aH as ke,ah as de,b as te,s as Y,a4 as z,b7 as xe,a as ee,t as Ke,ab as _e,b8 as Ne,aS as Ce,V as me,a5 as De,U as we,ai as Pe,b9 as Ee,ac as le,b4 as F,ba as Se,q as Oe,P as Te,aJ as X}from"./index-6b1c5c2b.js";var ne=C.createContext({}),V=globalThis&&globalThis.__assign||function(){return V=Object.assign||function(r){for(var s,t=1,i=arguments.length;t<i;t++){s=arguments[t];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(r[e]=s[e])}return r},V.apply(this,arguments)};function Le(r){return r.key||r._key}var Me=function(r){var s,t=C.useContext(ne),i=C.useContext(re).getPrefixCls,e=i("tree-node"),n=t.getTreeState(),l=n.expandedKeys,g=n.currentExpandKeys,k=r.expanded,d=C.useRef(r.childrenData);d.current=r.childrenData,C.useEffect(function(){return function(){t.onExpandEnd&&t.onExpandEnd(r._key)}},[]);var a=C.useMemo(function(){var o=[],u=function(h){h.forEach(function(x){var K=t.getFieldInfo(x);o.push(K),K.children&&K.children.length&&u(K.children)})};return u(d.current||[]),o},[k]),c=C.useMemo(function(){var o=[];if(a.length){var u=new Set(l||[]);a.forEach(function(h){var x,K,p=V({},t.key2nodeProps[h.key]);if(k)K=p.parentKey===r._key||((x=p.pathParentKeys)===null||x===void 0?void 0:x.every(function(y){return u.has(y)}));else if(p.pathParentKeys){var D=p.pathParentKeys.indexOf(r._key);K=p.pathParentKeys.slice(D+1).every(function(y){return u.has(y)})}K&&o.push(V(V({},p),{key:h.key}))})}return t.getNodeProps(o)},[a,r._key,k]),f=(s=t.virtualListProps)===null||s===void 0?void 0:s.height;return f=be(f)?f:0,C.useEffect(function(){g.indexOf(r._key)>-1&&c.length===0&&t.onExpandEnd(r._key)},[c,g]),m(ke,{in:g.indexOf(r._key)>-1&&c.length>0,unmountOnExit:!0,classNames:"tree-slide-expand",timeout:{enter:200,exit:0},onEnter:function(o){var u=o.scrollHeight;o.style.height=k?0:Math.min(f||u,o.scrollHeight)+"px"},onEntering:function(o){var u=o.scrollHeight;o.style.height=k?Math.min(f||u,u)+"px":0},onEntered:function(o){o.style.height=r.expanded?"":0,t.onExpandEnd(r._key)},onExit:function(o){o.style.display="none"},children:m(de,{...V({itemKey:Le,className:e+"-list",isStaticItemHeight:!1},t.virtualListProps,{data:c,"aria-hidden":!0,style:{overflow:"hidden"}}),children:function(o){return m(G,{...V({},o)})}})})};const Ie=Me;var I=globalThis&&globalThis.__assign||function(){return I=Object.assign||function(r){for(var s,t=1,i=arguments.length;t<i;t++){s=arguments[t];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(r[e]=s[e])}return r},I.apply(this,arguments)},Ae=globalThis&&globalThis.__awaiter||function(r,s,t,i){function e(n){return n instanceof t?n:new t(function(l){l(n)})}return new(t||(t=Promise))(function(n,l){function g(a){try{d(i.next(a))}catch(c){l(c)}}function k(a){try{d(i.throw(a))}catch(c){l(c)}}function d(a){a.done?n(a.value):e(a.value).then(g,k)}d((i=i.apply(r,s||[])).next())})},je=globalThis&&globalThis.__generator||function(r,s){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,e,n,l;return l={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function g(d){return function(a){return k([d,a])}}function k(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(n=d[0]&2?e.return:d[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,d[1])).done)return n;switch(e=0,n&&(d=[d[0]&2,n.value]),d[0]){case 0:case 1:n=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,e=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){t.label=d[1];break}if(d[0]===6&&t.label<n[1]){t.label=n[1],n=d;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(d);break}n[2]&&t.ops.pop(),t.trys.pop();continue}d=s.call(r,t)}catch(a){d=[6,a],e=0}finally{i=n=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},oe=globalThis&&globalThis.__read||function(r,s){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],l;try{for(;(s===void 0||s-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(g){l={error:g}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return n},He=globalThis&&globalThis.__spreadArray||function(r,s,t){if(t||arguments.length===2)for(var i=0,e=s.length,n;i<e;i++)(n||!(i in s))&&(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return r.concat(n||Array.prototype.slice.call(s))};function Re(r,s){var t,i,e,n=this,l=C.useContext(ne),g=C.useContext(re).getPrefixCls,k=C.useRef(),d=oe(C.useState({isAllowDrop:!0,isDragOver:!1,dragPosition:0,isDragging:!1}),2),a=d[0],c=d[1],f=r._key,o=f===void 0?"":f,u=r.title,h=r.icon,x=r.checkable,K=r.selected,p=r.disabled,D=r.disableCheckbox,y=r.isLeaf,_=r.draggable,N=r.expanded,L=r.showLine,w=r.loading,E=r.selectable,A=E===void 0?!0:E,v=g("tree-node"),j=Y(v,(t={},t[v+"-selected"]=K,t[v+"-is-leaf"]=y,t[v+"-expanded"]=N,t[v+"-disabled-selectable"]=!A,t[v+"-disabled"]=p,t[v+"-draggable"]=_,t),r.className),S=function(){var b=z(l.icons)?l.icons(r):l.icons,P=z(r.icons)?r.icons(r):r.icons;return I(I({},b),P)}(),B=C.useCallback(function(b){b!==N&&l.onExpand&&l.onExpand(b,o)},[N,l.onExpand]),R=C.useCallback(function(){return Ae(n,void 0,void 0,function(){var b,P,T;return je(this,function(H){switch(H.label){case 0:return b=r.isLeaf,P=r.expanded,b?[2]:!(!((T=r.childrenData)===null||T===void 0)&&T.length)&&z(l.loadMore)&&!P?[4,l.loadMore(r)]:[3,2];case 1:return H.sent(),[3,3];case 2:B(!P),H.label=3;case 3:return[2]}})})},[r,B,l.loadMore]),ge=function(){if(w)return"loadingIcon"in S?S.loadingIcon:m(Ce,{});var b=null,P=!1;if(y)L&&(b="switcherIcon"in S?S.switcherIcon:m(me,{}),P=!0);else{var T=L?m("span",{className:v+"-"+(N?"minus":"plus")+"-icon"}):m(we,{});b="switcherIcon"in S?S.switcherIcon:T,P=!L}if(b)return b=m("span",{className:v+"-switcher-icon","aria-label":N?"fold button":"expand button",role:"button",tabIndex:0,onClick:R,children:b}),P?m(De,{prefix:v,children:b}):b},J=C.useCallback(xe(function(b){var P=k.current;if(P){var T=P.getBoundingClientRect(),H=window.pageYOffset+T.top,ve=b.pageY,ie=T.height/4,se=ve-H,Z=se<ie?-1:se<T.height-ie?0:1,pe=l.allowDrop(r,Z);c(I(I({},a),{isAllowDrop:pe,isDragOver:!0,dragPosition:Z})),l.onNodeDragOver&&l.onNodeDragOver(b,r,Z)}}),[l.onNodeDragOver]),ae=C.useCallback(function(b,P){var T=r.disableCheckbox,H=r.disabled;T||H||l.onCheck&&l.onCheck(b,o,P)},[r.disabled,r.disableCheckbox]);return ee(Ke,{children:[ee("div",{style:r.style,className:j,ref:s,role:"treeitem","aria-disabled":p,"aria-expanded":N,"aria-level":r._level,children:[m("span",{className:v+"-indent","aria-hidden":!0,children:He([],oe(Array(r._level)),!1).map(function(b,P){var T;return m("span",{className:Y(v+"-indent-block",(T={},T[v+"-indent-block-lineless"]=r._lineless&&r._lineless[P],T))},P)})}),m("span",{className:Y(v+"-switcher",(i={},i[v+"-switcher-expanded"]=N,i)),children:ge()}),x?m(_e,{disabled:D||p,value:o,indeterminate:r.indeterminated,checked:r.checked,onChange:ae}):null,ee("span",{"aria-grabbed":a.isDragging,ref:k,className:Y(v+"-title",(e={},e[v+"-title-draggable"]=_,e[v+"-title-gap-top"]=a.isDragOver&&a.isAllowDrop&&a.dragPosition<0,e[v+"-title-gap-bottom"]=a.isDragOver&&a.isAllowDrop&&a.dragPosition>0,e[v+"-title-highlight"]=!a.isDragging&&a.isDragOver&&a.isAllowDrop&&a.dragPosition===0,e[v+"-title-dragging"]=a.isDragging,e[v+"-title-block"]=r.blockNode,e)),onClick:function(b){var P=l.onSelect,T=l.actionOnClick;if(!r.disabled){var H=[].concat(T);A&&H.indexOf("select")>-1&&P&&P(o,b),H.indexOf("expand")>-1&&R(),x&&H.indexOf("check")>-1&&ae(!r.checked,b)}},draggable:_,onDrop:function(b){b.stopPropagation(),b.preventDefault(),l.onNodeDrop&&l.onNodeDrop(b,r,a.dragPosition),J.cancel(),c(I(I({},a),{isDragOver:!1,dragPosition:0}))},onDragStart:function(b){if(_){b.stopPropagation(),c(I(I({},a),{isDragging:!0})),l.onNodeDragStart&&l.onNodeDragStart(b,r);try{b.dataTransfer.setData("text/plain","")}catch{}}},onDragEnd:function(b){_&&(b.stopPropagation(),J.cancel(),c(I(I({},a),{isDragOver:!1,isDragging:!1})),l.onNodeDragEnd&&l.onNodeDragEnd(b,r))},onDragOver:function(b){b.preventDefault(),b.stopPropagation(),b.persist(),J(b)},onDragLeave:function(b){_&&(b.stopPropagation(),J.cancel(),c(I(I({},a),{isDragOver:!1})),l.onNodeDragLeave&&l.onNodeDragLeave(b,r))},children:[h&&m("span",{className:v+"-icon "+v+"-custom-icon",children:h}),m("span",{className:v+"-title-text",children:z(l.renderTitle)?l.renderTitle(r):u}),_&&m("span",{className:v+"-icon "+v+"-drag-icon",children:"dragIcon"in S?S.dragIcon:m(Ne,{})})]}),z(l.renderExtra)&&l.renderExtra(r)]}),m(Ie,{...I({},r)})]})}var fe=C.forwardRef(Re);fe.displayName="TreeNode";const G=te.memo(fe);var q=globalThis&&globalThis.__assign||function(){return q=Object.assign||function(r){for(var s,t=1,i=arguments.length;t<i;t++){s=arguments[t];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(r[e]=s[e])}return r},q.apply(this,arguments)},ce=globalThis&&globalThis.__read||function(r,s){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],l;try{for(;(s===void 0||s-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(g){l={error:g}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return n},$e=globalThis&&globalThis.__spreadArray||function(r,s,t){if(t||arguments.length===2)for(var i=0,e=s.length,n;i<e;i++)(n||!(i in s))&&(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return r.concat(n||Array.prototype.slice.call(s))};function Fe(r){return r.key||r._key}function Ve(r,s){var t=r.className,i=r.style,e=r.filterNode,n=r.virtualListProps,l=r.expandedKeys,g=r.currentExpandKeys,k=r.saveCacheNode,d=r.nodeList,a=r.getNodeProps,c=(n==null?void 0:n.threshold)!==null,f=C.useRef(),o=C.useRef(),u=C.useMemo(function(){return new Set(l)},[l]),h=C.useMemo(function(){var y=new Set,_=new Set(g);return d.forEach(function(N){var L=N.pathParentKeys||[];L.every(function(w){return!_.has(w)&&u.has(w)})&&y.add(N._key)}),y},[u,g,d]),x=C.useCallback(function(){return d.filter(function(y){var _=!e||e&&e(y);return _&&h.has(y.key)?!0:(k(y),!1)})},[d,e,h]),K=ce(C.useState(function(){return x()}),2),p=K[0],D=K[1];return Pe(function(){D(x())},[x]),C.useImperativeHandle(s,function(){return{scrollIntoView:function(y,_){var N=y,L=typeof y=="string";if(L){var w=y;!h.has(y)&&_&&_.pathParentKeys&&(w=$e([],ce(_.pathParentKeys),!1).reverse().find(function(v){return h.has(v)})||N),N=p.findIndex(function(v){var j=v._key;return j===w})}if(!c&&o.current){var E=o.current,A=E?E.children[N]:null;A&&Ee(A,{boundary:E.parentElement})}else f.current&&f.current.scrollTo({index:N})}}}),c?m(de,{...q({className:t,style:i,ref:f,data:a(p),isStaticItemHeight:!1,itemKey:Fe,onMouseDown:r.onMouseDown},r.ariaProps,n),children:function(y){var _=m(G,{...q({},y,{key:y.key})});return k(y),_}}):m("div",{...q({role:"tree",tabIndex:0,className:t,style:i,ref:o},r.ariaProps,{onMouseDown:r.onMouseDown}),children:p.map(function(y){var _=a(y),N=m(G,{...q({},_,{key:y.key})});return k(y),N})})}const We=C.forwardRef(Ve);var Q=globalThis&&globalThis.__assign||function(){return Q=Object.assign||function(r){for(var s,t=1,i=arguments.length;t<i;t++){s=arguments[t];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(r[e]=s[e])}return r},Q.apply(this,arguments)},W=globalThis&&globalThis.__read||function(r,s){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],l;try{for(;(s===void 0||s-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(g){l={error:g}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return n},U=globalThis&&globalThis.__spreadArray||function(r,s,t){if(t||arguments.length===2)for(var i=0,e=s.length,n;i<e;i++)(n||!(i in s))&&(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return r.concat(n||Array.prototype.slice.call(s))},Ue=function(r){var s=function(t){return te.Children.map(t,function(i){if(te.isValidElement(i)){var e=i.key;return Q(Q({},i.props),{key:e,children:s(i.props.children)})}})};return s(r)};function ue(r,s){var t=new Set,i=function(e){e.map(function(n){var l=n.key,g=s[l];!g||g.disabled||g.disableCheckbox||g.checkable===!1||(t.add(l),i(g.children||[]))})};return r&&i(r.children||[]),t}var he=function(r,s,t,i){var e=U([],W(s[r].pathParentKeys),!1);e.reverse().some(function(n){var l=s[n];if(l&&!l.disabled&&!l.disableCheckbox&&l.checkable!==!1){var g=0,k=0;l.children.some(function(d){var a=d.key,c=s[a];if(!c||c.disabled||c.disableCheckbox||c.checkable===!1)return!1;if(g++,t.has(a))k++;else if(i.has(a))return k+=.5,!0}),!k||k===g?i.delete(n):i.add(n),k&&k===g?t.add(n):t.delete(n)}else return!0})};function Be(r,s){var t=new Set(r||[]),i=new Set,e=new Set;return r.forEach(function(n){if(!e.has(n)){var l=ue(s[n],s);l.forEach(function(g){e.add(g)})}s[n]&&!s[n].pathParentKeys.some(function(g){return t.has(g)})&&he(n,s,t,i)}),{checkedKeys:U([],W(new Set(U(U([],W(t),!1),W(e),!1))),!1),indeterminateKeys:U([],W(i),!1)}}function ze(r,s,t,i,e){if(!i[r])return{checkedKeys:t,indeterminateKeys:e};var n=new Set(t),l=new Set(e),g=ue(i[r],i),k=n;return s?(k.add(r),l.delete(r),g.forEach(function(d){k.add(d)})):(l.delete(r),k.delete(r),g.forEach(function(d){k.delete(d)})),he(r,i,n,l),{checkedKeys:U([],W(k),!1),indeterminateKeys:U([],W(l),!1)}}var Ye=globalThis&&globalThis.__extends||function(){var r=function(s,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])},r(s,t)};return function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(s,t);function i(){this.constructor=s}s.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),O=globalThis&&globalThis.__assign||function(){return O=Object.assign||function(r){for(var s,t=1,i=arguments.length;t<i;t++){s=arguments[t];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(r[e]=s[e])}return r},O.apply(this,arguments)},qe=globalThis&&globalThis.__awaiter||function(r,s,t,i){function e(n){return n instanceof t?n:new t(function(l){l(n)})}return new(t||(t=Promise))(function(n,l){function g(a){try{d(i.next(a))}catch(c){l(c)}}function k(a){try{d(i.throw(a))}catch(c){l(c)}}function d(a){a.done?n(a.value):e(a.value).then(g,k)}d((i=i.apply(r,s||[])).next())})},Ge=globalThis&&globalThis.__generator||function(r,s){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,e,n,l;return l={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function g(d){return function(a){return k([d,a])}}function k(d){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(n=d[0]&2?e.return:d[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,d[1])).done)return n;switch(e=0,n&&(d=[d[0]&2,n.value]),d[0]){case 0:case 1:n=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,e=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){t.label=d[1];break}if(d[0]===6&&t.label<n[1]){t.label=n[1],n=d;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(d);break}n[2]&&t.ops.pop(),t.trys.pop();continue}d=s.call(r,t)}catch(a){d=[6,a],e=0}finally{i=n=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Je=globalThis&&globalThis.__rest||function(r,s){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&s.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,i=Object.getOwnPropertySymbols(r);e<i.length;e++)s.indexOf(i[e])<0&&Object.prototype.propertyIsEnumerable.call(r,i[e])&&(t[i[e]]=r[i[e]]);return t},$=globalThis&&globalThis.__read||function(r,s){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),e,n=[],l;try{for(;(s===void 0||s-- >0)&&!(e=i.next()).done;)n.push(e.value)}catch(g){l={error:g}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return n},M=globalThis&&globalThis.__spreadArray||function(r,s,t){if(t||arguments.length===2)for(var i=0,e=s.length,n;i<e;i++)(n||!(i in s))&&(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return r.concat(n||Array.prototype.slice.call(s))},ye={key:"key",title:"title",children:"children",selectable:"selectable",disabled:"disabled",disableCheckbox:"disableCheckbox",checkable:"checkable",isLeaf:"isLeaf"},Qe={selectable:!0,autoExpandParent:!0,checkedStrategy:"all",actionOnClick:"select",allowDrop:function(){return!0},fieldNames:ye},Xe=["style","className","height","size","blockNode","autoExpandParent","checkedStrategy","fieldNames","icons","virtualListProps","showLine","selectable","allowDrop","actionOnClick"],Ze=function(r){Ye(s,r);function s(t,i){var e=r.call(this,t,i)||this;e.cacheNodes={},e.key2nodeProps={},e.getMergedProps=function(a){var c=e.context.componentConfig,f=a||e.props,o=(c==null?void 0:c.Tree)||{},u={};return Xe.forEach(function(h){le(f[h])?le(o[h])?u[h]=Qe[h]:u[h]=o[h]:u[h]=f[h]}),u},e.scrollIntoView=function(a,c){var f=a;c&&(f=c._key),e.nodeListRef&&e.nodeListRef.scrollIntoView(f,c||e.key2nodeProps[f])},e.getTreeData=function(){return"treeData"in e.props?e.props.treeData:Ue(e.props.children)},e.needUpdateTreeData=function(a,c){var f=["fieldNames","selectable","draggable","checkStrictly","showLine","blockNode","checkable","treeData","children"];return a.treeData!==c.treeData||a.children!==c.children||f.some(function(o){return F(a[o],c[o])})},e.getFieldInfo=function(a){var c=e.getMergedProps(),f=c.selectable,o=O(O({},ye),"treeData"in e.props?c.fieldNames:{}),u={children:a[o.children],selectable:o.selectable in a?a[o.selectable]:f,checkable:o.checkable in a?a[o.checkable]:e.props.checkable,title:a[o.title],disabled:a[o.disabled],disableCheckbox:a[o.disableCheckbox],isLeaf:a[o.isLeaf],key:a[o.key]};return o.key in a||delete u.key,u},e.getNodeList=function(a,c){e.key2nodeProps={};var f=c||e.context.getPrefixCls("tree"),o=[],u=0,h=e.getMergedProps(),x=h.showLine,K=h.blockNode,p=function(D,y){var _=D.length;return D.map(function(N,L){var w=e.getFieldInfo(N),E=w.children,A=w.selectable,v=w.checkable,j=w.key,S=j===void 0?((y==null?void 0:y._key)||"")+"-"+L:j,B=Je(w,["children","selectable","checkable","key"]),R=O(O(O({dataRef:N,draggable:e.props.draggable,selectable:A,checkable:v,showLine:x,blockNode:K},N),B),{key:S,children:E,_key:S,_index:u++,parentKey:y?y._key:void 0,pathParentKeys:y&&y.pathParentKeys||[],_level:y._level||0,_lineless:y&&y._lineless?M(M([],$(y._lineless||[]),!1),[y._isTail],!1):[]});return _===L+1&&(R.className=Y(f+"-node-is-tail",R.className)),o.push(R),e.key2nodeProps[S]=R,E&&E.length&&(e.key2nodeProps[S].children=p(E,{_key:S,_level:R._level+1,_lineless:R._lineless,_isTail:_===L+1,pathParentKeys:M(M([],$((y==null?void 0:y.pathParentKeys)||[]),!1),[S],!1)})),R})};return p(a||[],{}),o},e.getInitExpandedKeys=function(a){if(!e.getMergedProps().autoExpandParent)return a||[];if(!a)return Object.keys(e.key2nodeProps).filter(function(f){var o=e.key2nodeProps[f];return o.children&&o.children.length});var c={};return a.forEach(function(f){var o=e.key2nodeProps[f];o&&(c[f]=1,o.pathParentKeys&&o.pathParentKeys.forEach(function(u){c[u]=1}))}),Object.keys(c)},e.getInitCheckedKeys=function(a){if(!e.props.checkStrictly){var c=Be(a,e.key2nodeProps),f=c.checkedKeys,o=c.indeterminateKeys;return{checkedKeys:f,halfCheckedKeys:o}}return{checkedKeys:a,halfCheckedKeys:e.props.halfCheckedKeys||[]}},e.handleSelect=function(a,c){var f=e.props.onSelect,o={e:c,node:e.getCacheNode([a])[0]};if(e.props.multiple){var u=M([],$(e.state.selectedKeys),!1),h=u.indexOf(a);h>-1?(u.splice(h,1),o.selected=!1):(o.selected=!0,u.push(a)),o.selectedNodes=e.getCacheNode(u),"selectedKeys"in e.props||e.setState({selectedKeys:u}),f&&f(u,o)}else o.selected=!0,o.selectedNodes=e.getCacheNode([a]),"selectedKeys"in e.props||e.setState({selectedKeys:[a]}),f&&f([a],o)},e.handleCheck=function(a,c,f){var o=e.getMergedProps().checkedStrategy,u=e.props,h=u.onCheck,x=u.checkStrictly,K={e:f,node:e.getCacheNode([c])[0]},p=e.state.checkedKeys,D=e.state.halfCheckedKeys;if(x){a?p=p.concat(c):p=p.filter(function(w){return w!==c});var y={};"checkedKeys"in e.props||(y.checkedKeys=p),"halfCheckedKeys"in e.props||(y.halfCheckedKeys=D),Se(y)||e.setState(O({},y))}else{var _=ze(c,a,p,e.key2nodeProps,D),N=_.checkedKeys,L=_.indeterminateKeys;p=N,D=L,"checkedKeys"in e.props?e.setState({halfCheckedKeys:D}):e.setState({checkedKeys:p,halfCheckedKeys:D}),o===s.SHOW_PARENT?p=p.filter(function(w){var E=e.key2nodeProps[w];if(!E||p.indexOf(E.parentKey)===-1)return!0}):o===s.SHOW_CHILD&&(p=p.filter(function(w){var E,A,v=e.key2nodeProps[w];if(!v||!(!((E=v.children)===null||E===void 0)&&E.length)||!((A=v.children)===null||A===void 0)&&A.every(function(j){return p.indexOf(j._key)===-1}))return!0}))}h&&h(p,O({checkedNodes:e.getCacheNode(p),checked:a,halfCheckedKeys:D,halfCheckedNodes:e.getCacheNode(D)},K))},e.handleLoadMore=function(a){var c=e.props.loadMore;if(z(c)){var f=e.state,o=f.loadingKeys,u=o===void 0?[]:o,h=f.loadedKeys;e.setState({loadingKeys:Array.from(new Set(M(M([],$(u),!1),[a._key],!1))),loadedKeys:h.filter(function(x){return x!==a._key})},function(){return qe(e,void 0,void 0,function(){var x;return Ge(this,function(K){switch(K.label){case 0:return K.trys.push([0,2,,3]),[4,c(this.getCacheNode([a._key])[0])];case 1:return K.sent(),this.setState({loadedKeys:Array.from(new Set(M(M([],$(this.state.loadedKeys),!1),[a._key],!1))),loadingKeys:this.state.loadingKeys.filter(function(p){return p!==a._key})}),this.handleExpand(!a.expanded,a._key),[3,3];case 2:return x=K.sent(),console.error("[tree]load data error: ",x),this.setState({loadingKeys:this.state.loadingKeys.filter(function(p){return p!==a._key})}),[3,3];case 3:return[2]}})})})}},e.handleNodeDragStart=function(a,c){e.dragNode=e.getCacheNode([c._key])[0],e.dropPosition=0;var f=e.props.onDragStart;f&&f(a,e.getCacheNode([c._key])[0])},e.handleNodeDragEnd=function(a,c){e.dragNode=null,e.dropPosition=0;var f=e.props.onDragEnd;f&&f(a,e.getCacheNode([c._key])[0])},e.handleNodeDragOver=function(a,c,f){e.dropPosition=f;var o=e.props.onDragOver;o&&o(a,e.getCacheNode([c._key])[0])},e.handleNodeDragLeave=function(a,c){e.dropPosition=0;var f=e.props.onDragLeave;f&&f(a,e.getCacheNode([c._key])[0])},e.isChildOfNode=function(a,c){for(var f=e.key2nodeProps[a.parentKey];f;){var o=f._key,u=f.parentKey;if(o===c.props._key)return!0;if(u===o)return;f=e.key2nodeProps[u]}},e.isSameNode=function(a,c){if(a===void 0||c===void 0)return!1;if(a===c)return!0;var f=a.key,o=c.key;if(f!==void 0||o!==void 0)return f===o;var u=a.props._key,h=c.props._key;return u===void 0&&h===void 0?!1:u===h},e.handleNodeDrop=function(a,c,f){if(e.dragNode){var o=e.getMergedProps().allowDrop,u=e.props.onDrop,h=e.getCacheNode([c._key])[0];if(u&&!e.isChildOfNode(c,e.dragNode)&&!e.isSameNode(e.dragNode,h)){if(o&&!o({dropNode:h,dragNode:e.dragNode,dropPosition:f}))return;u({dragNode:e.dragNode,dropNode:h,dropPosition:f,e:a})}}},e.handleAllowDrop=function(a,c){var f=e.getMergedProps().allowDrop,o=!0;return typeof f=="function"&&(o=f({dropNode:e.getCacheNode([a._key])[0],dragNode:e.dragNode,dropPosition:c})),o},e.handleExpand=function(a,c){var f=e.state,o=f.currentExpandKeys,u=f.expandedKeys,h=u===void 0?[]:u,x=e.props.onExpand;if(!(o.indexOf(c)>-1)){var K=[];a?K=Array.from(new Set(M(M([],$(h),!1),[c],!1))):K=h.filter(function(p){return p!==c}),"expandedKeys"in e.props||e.setState({expandedKeys:K,currentExpandKeys:M(M([],$(o),!1),[c],!1)}),x&&x(K,{expanded:a,node:e.getCacheNode([c])[0],expandedNodes:e.getCacheNode(K)})}},e.getCacheNode=function(a){var c=e.props.__ArcoAdapterMode__,f=[];[].concat(a).forEach(function(u){var h=e.cacheNodes[u];h&&f.push(h)});var o=e.getNodeProps(f);return o.map(function(u){return c?{props:u,key:a}:m(G,{...O({},u,{key:u.key})})})},e.getNodeProps=function(a){var c=e.getMergedProps().autoExpandParent,f=e.props.loadMore,o=e.state,u=o.selectedKeys,h=o.expandedKeys,x=o.checkedKeys,K=o.halfCheckedKeys,p=o.loadingKeys,D=p===void 0?[]:p,y=o.loadedKeys,_=y===void 0?[]:y,N=new Set(h||[]),L=new Set(x||[]),w=new Set(u||[]),E=new Set(K||[]),A=function(v){var j=v.children&&v.children.length,S={isLeaf:!j,autoExpandParent:j?c:!1,expanded:N?N.has(v._key):h.indexOf(v._key)>-1};if(f){var B=_.indexOf(v._key)>-1;S.loaded=B,S.isLeaf=j?!1:v.isLeaf}return O(O(O({},v),S),{selected:w.has(v._key),indeterminated:E.has(v._key),loading:D.indexOf(v._key)>-1,checked:L.has(v._key),selectedKeys:u,checkedKeys:x,loadingKeys:D,loadedKeys:_,expandedKeys:h,childrenData:v.children||[],children:null})};return Oe(a)?a.map(function(v){return A(v)}):A(a)},e.handleExpandEnd=function(a){var c=e.state.currentExpandKeys;c.indexOf(a)>-1&&e.setState({currentExpandKeys:c.filter(function(f){return f!==a})})},e.getTreeState=function(){return e.state},e.state={};var n=e.getTreeData(),l=e.getNodeList(n,i.getPrefixCls("tree")),g=e.getInitCheckedKeys(t.checkedKeys||t.defaultCheckedKeys||[]),k=g.checkedKeys,d=g.halfCheckedKeys;return e.state={selectedKeys:t.selectedKeys||t.defaultSelectedKeys||[],checkedKeys:k,halfCheckedKeys:d,expandedKeys:e.getInitExpandedKeys(t.expandedKeys||t.defaultExpandedKeys),loadedKeys:[],loadingKeys:[],currentExpandKeys:[],nodeList:l},e}return s.getDerivedStateFromProps=function(t,i){var e={};return"selectedKeys"in t&&!F(t.selectedKeys,i.selectedKeys)&&(e.selectedKeys=t.selectedKeys||[]),Object.keys(e).length?e:null},s.prototype.componentDidUpdate=function(t){var i=this,e=this.getMergedProps(t),n=this.getMergedProps();if(t!==this.props||!F(e,n)){var l={};if(this.needUpdateTreeData(O({prevMergedProps:e},t),O(O({},n),this.props))){var g=this.getTreeData(),k=this.getNodeList(g);l.treeData=g,l.nodeList=k}if(l.treeData||"checkedKeys"in this.props&&!F(t.checkedKeys,this.props.checkedKeys)){var d="checkedKeys"in this.props?this.props.checkedKeys:this.state.checkedKeys,a=this.getInitCheckedKeys(d||[]),c=a.halfCheckedKeys,f=a.checkedKeys;F(f,this.state.checkedKeys)||(l.checkedKeys=f),F(c,this.state.halfCheckedKeys)||(l.halfCheckedKeys=c)}this.props.checkStrictly&&"halfCheckedKeys"in this.props&&!F(t.halfCheckedKeys,this.props.halfCheckedKeys)&&(l.halfCheckedKeys=this.props.halfCheckedKeys),"expandedKeys"in this.props&&!F(this.props.expandedKeys,t.expandedKeys)&&(l.expandedKeys=this.props.expandedKeys,l.currentExpandKeys=M(M([],$(l.expandedKeys),!1),$(this.state.expandedKeys),!1).reduce(function(u,h){var x=u.indexOf(h);return x===-1?u.push(h):u.splice(x,1),u},[]).filter(function(u,h,x){var K;if(i.key2nodeProps[u]){var p=i.key2nodeProps[u].pathParentKeys;return p.some(function(D){return x.indexOf(D)>-1})?!1:(K=i.key2nodeProps[u].children)===null||K===void 0?void 0:K.length}}));var o=l.currentExpandKeys||this.state.currentExpandKeys;l.treeData&&o&&(l.currentExpandKeys=o.filter(function(u){var h=l.treeData.find(function(x){return x._key===u});return h&&h.children&&h.children.length})),Object.keys(l).length&&this.setState(l)}},s.prototype.render=function(){var t,i=this;this.cacheNodes={};var e=this.getMergedProps(),n=e.className,l=e.showLine,g=e.size,k=e.virtualListProps,d=e.height,a=e.style,c=e.icons,f=e.actionOnClick,o=this.props,u=o.loadMore,h=o.checkable,x=k?O({threshold:100},k):d?{height:d,threshold:100}:{threshold:null},K=this.context,p=K.getPrefixCls,D=K.rtl,y=p("tree");return m(ne.Provider,{value:{icons:c,key2nodeProps:this.key2nodeProps,getFieldInfo:this.getFieldInfo,getTreeState:this.getTreeState,getNodeProps:this.getNodeProps,onExpandEnd:this.handleExpandEnd,onSelect:this.handleSelect,onCheck:this.handleCheck,onNodeDragStart:this.handleNodeDragStart,onNodeDragEnd:this.handleNodeDragEnd,onNodeDragLeave:this.handleNodeDragLeave,onNodeDragOver:this.handleNodeDragOver,onNodeDrop:this.handleNodeDrop,onExpand:this.handleExpand,renderExtra:this.props.renderExtra,renderTitle:this.props.renderTitle,loadMore:u&&this.handleLoadMore,allowDrop:this.handleAllowDrop,actionOnClick:f,virtualListProps:x},children:m(We,{ref:function(_){i.nodeListRef=_},className:Y(y,(t={},t[y+"-checkable"]=h,t[y+"-show-line"]=l,t[y+"-size-"+g]=g,t[y+"-rtl"]=D,t),n),style:a,filterNode:this.props.filterNode,virtualListProps:x,expandedKeys:this.state.expandedKeys,currentExpandKeys:this.state.currentExpandKeys,getNodeProps:this.getNodeProps,nodeList:this.state.nodeList,onMouseDown:this.props.onMouseDown,saveCacheNode:function(_){i.cacheNodes[_.key]=_},ariaProps:O({role:"tree","aria-multiselectable":this.props.multiple,tabIndex:0},Te(this.props))})})},s.displayName="Tree",s.SHOW_PARENT="parent",s.SHOW_ALL="all",s.SHOW_CHILD="child",s.Node=G,s.contextType=re,s}(C.Component);const tt=Ze;const rt=()=>X.get("/api/menu"),nt=r=>X.post("/api/menu",r),at=(r,s)=>X.patch(`/api/menu/${r}`,s),it=r=>X.delete(`/api/menu/${r}`);export{tt as T,Ue as a,ze as b,rt as c,nt as d,it as e,Be as g,at as u};
