import{r,Y as S,Z as y,a as C,j as a,S as b,B as T,$ as z,T as x,a0 as U}from"./index-d9b286db.js";import{C as j}from"./index-1a9b1006.js";import"./index-3e8a6381.js";import{T as k}from"./index-b8adce3c.js";import w from"./form-56e01da9.js";import{s as B}from"./index.module-6d5fffca.js";import{getColumns as P}from"./constants-ed5a8b38.js";import{g as E,U as v,d as F}from"./edit-0626d25b.js";import"./index-ec76331c.js";import"./index-63f93476.js";import"./index-e84d0038.js";import"./service-7af6ee6e.js";const{Title:I}=x;function $(){const[m,s]=r.useState(!1),[l,c]=r.useState({}),[e,n]=r.useState({pageSize:10,current:1}),{data:o,loading:p,run:u}=S(E),d=async(t,i)=>{switch(i){case"delete":await F(t.id),n({...e,current:1,unixTime:U().unix()});break;case"edit":c(t),s(!0);break}},g=r.useMemo(()=>P(d),[]);y(async()=>{u(e)},[JSON.stringify(e)]);function f({current:t,pageSize:i}){n({...e,current:t,pageSize:i})}function h(t){n({...t,pageSize:e.pageSize,current:1})}return C(j,{children:[a(I,{heading:6,children:"用户列表"}),a(w,{onSearch:h}),a("div",{className:B["button-group"],children:a(b,{children:a(T,{type:"primary",icon:a(z,{}),onClick:()=>s(!0),children:"新增"})})}),a(k,{rowKey:"id",loading:p,onChange:f,pagination:{sizeCanChange:!0,showTotal:!0,pageSizeChangeResetCurrent:!0,current:e.current,pageSize:e.pageSize},columns:g,data:o==null?void 0:o.data}),m&&a(v,{data:l,onClose:()=>{u(e),c({}),s(!1)}})]})}export{$ as default};
