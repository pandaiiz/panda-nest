import{Y as R,aN as v,r as K,j as o,d as y,aK as r,e as m,aM as w,a as k,t as q,i as C,B as E}from"./index-c8148c41.js";import"./index-c467507d.js";import{T as N}from"./index-1c8757fc.js";import{d as T}from"./service-c4de76ee.js";import j from"./pictureUpload-c2ef51cc.js";import"./index.browser-7e542916.js";const F=({detailData:s,setDetailData:c,setSelectedRow:u,selectedRow:b})=>{const{data:d}=R(()=>v("CATEGORY")),x=[{title:"品名",dataIndex:"category",align:"center",render:(t,e,a)=>o(y,{disabled:e.status===1,placeholder:"请选择品名",allowClear:!0,value:e.category,onChange:(n,l)=>{const I=p.filter(g=>g!==e.nanoid),S=b.filter(g=>g.nanoid!==e.nanoid);h(I),u(S);const i=r.cloneDeep(s);n?(i[a].category=n,i[a].categoryName="children"in l?l.children:""):(i[a].category="",i[a].categoryName=""),c(i)},children:d==null?void 0:d.map(n=>o(y.Option,{value:n.key,children:n.title},n.id))})},{title:"款号",dataIndex:"styleCode",align:"center",render:(t,e,a)=>o(m,{disabled:e.status===1,value:e.styleCode,onChange:n=>{const l=r.cloneDeep(s);l[a].styleCode=n,c(l)}})},{title:"图片",dataIndex:"imgSrc",align:"center",render:(t,e,a)=>o(j,{url:e.imgSrc,onChange:n=>{const l=r.cloneDeep(s);l[a].imgSrc=n[0].response.src,c(l)}})},{title:"圈号",dataIndex:"circle",align:"center",render:(t,e,a)=>o(m,{disabled:e.status===1,value:e.circle,onChange:n=>{const l=r.cloneDeep(s);l[a].circle=n,c(l)}})},{title:"件重",dataIndex:"singleWeight",align:"center",render:(t,e,a)=>o(w,{disabled:e.status===1,value:e.singleWeight,onChange:n=>{const l=r.cloneDeep(s);l[a].singleWeight=n,c(l)}})},{title:"数量",dataIndex:"quantity",align:"center",render:(t,e,a)=>o(w,{disabled:e.status===1,value:e.quantity,onChange:n=>{const l=r.cloneDeep(s);l[a].quantity=n,c(l)}})},{title:"状态",align:"center",dataIndex:"status",render:t=>k(q,{children:[t===0&&o(C,{color:"red",children:"未排产"}),t===1&&o(C,{color:"green",children:"已排产"})]})},{title:"操作",align:"center",render:(t,e,a)=>o(E,{disabled:e.status===1,type:"text",onClick:()=>f(e.id,a),children:"删除"})}],f=async(t,e)=>{t&&await T(t),c(s.filter((a,n)=>n!==e))},[p,h]=K.useState([]);return o(N,{columns:x,data:s,pagination:!1,rowKey:"nanoid",rowSelection:{type:"checkbox",selectedRowKeys:p,onChange:(t,e)=>{h(t),u(e)},checkboxProps:t=>({disabled:!t.category||t.status===1})}})};export{F as default};
